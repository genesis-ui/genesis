(()=>{"use strict";var e={745:(e,t,r)=>{var n=r(349);t.s=n.createRoot,n.hydrateRoot},349:e=>{e.exports=window.reactdom}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{class e extends Error{baseClassName;extendingClassName;methodName;name="MethodNotImplementedException";constructor(e,t,r,n){super(e),this.baseClassName=t,this.extendingClassName=r,this.methodName=n}getName(){return this.name}}class t{#e;constructor(e){this.#e=e}_notImplemented(t,r=null){throw r=r??this.#e,new e('Class "'+this.constructor.name+'" must implement abstract method "'+t+'" of class "'+r+'"',r,this.constructor.name,t)}static _notImplemented(e,t){(new this)._notImplemented(e,t)}}class n{static create(e,t){for(const[r,n]of Object.entries(t))Object.defineProperty(e,r.toString(),{value:n,writable:!1,enumerable:!0,configurable:!1})}static from(){}}class s extends Error{#e="GenesisUI::Exceptions::AbstractException";_notImplemented(t,r=null){throw r=r??this.#e,new e('Class "'+this.constructor.name+'" must implement abstract method "'+t+'" of class "'+r+'"',r,this.constructor.name,t)}getName(){this._notImplemented()}}class i extends s{message;bindableName;name="BindingException";constructor(e,t){super(e),this.bindableName=t}getName(){return this.name}}class o extends s{message;bindableName;name="BindingResolutionException";constructor(e,t){super(e),this.bindableName=t}getName(){return this.name}}class a{static#t={};static#r={};static#n={};clear(e){return a.#n[e]&&delete a.#n[e],a.#r[e]&&delete a.#r[e],a.#t[e]&&delete a.#t[e],this}resolve(e,t,r=[]){if(a.#n[e])return a.#n[e](t,...r);if(a.#r[e]){const n=a.#r[e](t,...r);return this.clear(e),this.bindInstance(e,n),this.resolve(e,t)}if(a.#t[e])return a.#t[e];throw new o('[GenesisUI] Could not resolve a bindable or instance from "'+e+'"')}bind(e,t){if("function"!=typeof t)throw new i('[GenesisUI] Could not bind: Bindable must be wrapped by a "function"',e);return this.clear(e),a.#n[e]=t,this}bindSingleton(e,t){if("function"!=typeof t)throw new i('[GenesisUI] Could not bind singleton: Bindable must be wrapped by a "function"',e);return this.clear(e),a.#r[e]=t,this}bindInstance(e,t){return this.clear(e),a.#t[e]=t,this}}class l{static#s={};add(e,t,r,n){return this.#i(e,t),l.#s[e][t][r]=n,this}#i(e,t){l.#s?.[e]||(l.#s[e]={}),l.#s[e]?.[t]||(l.#s[e][t]={})}trans(e,t,r){return l.#s?.[e]?.[t]?.[r]??t+"::"+r}search(e,t){const r=e.split("::");if(2!==r.length)return null;const n=r[0],s=r[1],i=l.#s?.[t]?.[n];if(!i)return null;let o={};for(const[e,t]of Object.entries(i))-1!==e.indexOf(s)&&(o[e]=t);return o.length>0?o:null}}class c{static#o=[];registerCallback(e){c.#o.push(e)}getCallbacks(){return c.#o}}class u{static merge(e,t){if(e&&t){for(const r of Object.keys(t)){const n=e?.[r]??null,s=t[r];n?"object"==typeof n&&"object"==typeof s&&(e[r]=this.merge(n,s)):e[r]=s}return e}return e??t??null}}class d{static#a={};static#l={};add(e,t){let r=d.#a?.[e]??{};r=u.merge(r,t);for(const[t,n]of Object.entries(r))d.#l[e+"."+t]=n}getAll(){return d.#a}get(e){return d.#l?.[e]}getObj(e,t=null){if(!d?.#a[e])return null;if(!t)return d.#a[e];const r=d.#a[e],n=t.split(".");let s=r?.[n[0]];for(let e=0;e<=n.length;e++){if(!s)return null;if(s=s?.[n[e]],e===n.length-1)return s}}}class h extends t{_app;constructor(e){super("GenesisUI::Providers::AbstractServiceProvider"),this._app=e}boot(){this._notImplemented("boot")}register(){this._notImplemented("register")}addListener(e,t){return document.addEventListener("gui.done",(()=>{addEventListener(e,(e=>{(new t).handle(e)}))})),this}addTranslations(e,t){const r=new l;for(const[n,s]of Object.entries(e))for(const[e,i]of Object.entries(s))r.add(t,n,e,i);return this}loadRoutes(e){return(new c).registerCallback(e),this}attachGlobalMiddleware(e){return this._app.make("app::view-kernel").attachGlobalMiddleware(e),this}loadConfig(e,t){return(new d).add(e,t(this._app.getEnv())),this}}class p extends s{name="RuntimeException";constructor(e){super(e)}getName(){return this.name}}class m{static#c=[];register(e){Array.isArray(e)||(e=[e]);for(const t of e){let e;try{if(e=new t,!(e instanceof h))throw new Error}catch(e){throw new p('[GenesisUI] Service-Provider must be an instance of "AbstractServiceProvider"')}m.#c.push(t)}}get(){return m.#c}}const f={en:{genesis:{}}};class w extends h{boot(){}register(){for(const[e,t]of Object.entries(f))this.addTranslations(t,e)}}class b extends s{name="OperationNotAllowedException";constructor(e){super(e)}getName(){return this.name}}class g extends s{name="RouteNotFoundException";path;constructor(e,t){super(e),this.path=t}getName(){return this.name}}function v(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var s=1,i="";if("?"===e[a=r+1])throw new TypeError('Pattern cannot start with "?" at '+a);for(;a<e.length;)if("\\"!==e[a]){if(")"===e[a]){if(0==--s){a++;break}}else if("("===e[a]&&(s++,"?"!==e[a+1]))throw new TypeError("Capturing groups are not allowed at "+a);i+=e[a++]}else i+=e[a++]+e[a++];if(s)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=a}else{for(var o="",a=r+1;a<e.length;){var l=e.charCodeAt(a);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[a++]}if(!o)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:o}),r=a}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,s=void 0===n?"./":n,i="[^"+E(t.delimiter||"/#?")+"]+?",o=[],a=0,l=0,c="",u=function(e){if(l<r.length&&r[l].type===e)return r[l++].value},d=function(e){var t=u(e);if(void 0!==t)return t;var n=r[l],s=n.type,i=n.index;throw new TypeError("Unexpected "+s+" at "+i+", expected "+e)},h=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};l<r.length;){var p=u("CHAR"),m=u("NAME"),f=u("PATTERN");if(m||f){var w=p||"";-1===s.indexOf(w)&&(c+=w,w=""),c&&(o.push(c),c=""),o.push({name:m||a++,prefix:w,suffix:"",pattern:f||i,modifier:u("MODIFIER")||""})}else{var b=p||u("ESCAPED_CHAR");if(b)c+=b;else if(c&&(o.push(c),c=""),u("OPEN")){w=h();var g=u("NAME")||"",v=u("PATTERN")||"",x=h();d("CLOSE"),o.push({name:g||(v?a++:""),pattern:g&&!v?i:v,prefix:w,suffix:x,modifier:u("MODIFIER")||""})}else d("END")}}return o}function x(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,s=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],o=n.index,a=Object.create(null),l=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?a[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return s(e,r)})):a[r.name]=s(n[e],r)},c=1;c<n.length;c++)l(c);return{path:i,index:o,params:a}}}(R(e,r,t),r,t)}function E(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function y(e){return e&&e.sensitive?"":"i"}function R(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,s=r.exec(e.source);s;)t.push({name:s[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),s=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return R(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",y(r))}(e,t,r):function(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,s=void 0!==n&&n,i=r.start,o=void 0===i||i,a=r.end,l=void 0===a||a,c=r.encode,u=void 0===c?function(e){return e}:c,d="["+E(r.endsWith||"")+"]|$",h="["+E(r.delimiter||"/#?")+"]",p=o?"^":"",m=0,f=e;m<f.length;m++){var w=f[m];if("string"==typeof w)p+=E(u(w));else{var b=E(u(w.prefix)),g=E(u(w.suffix));if(w.pattern)if(t&&t.push(w),b||g)if("+"===w.modifier||"*"===w.modifier){var v="*"===w.modifier?"?":"";p+="(?:"+b+"((?:"+w.pattern+")(?:"+g+b+"(?:"+w.pattern+"))*)"+g+")"+v}else p+="(?:"+b+"("+w.pattern+")"+g+")"+w.modifier;else p+="("+w.pattern+")"+w.modifier;else p+="(?:"+b+g+")"+w.modifier}}if(l)s||(p+=h+"?"),p+=r.endsWith?"(?="+d+")":"$";else{var x=e[e.length-1],R="string"==typeof x?h.indexOf(x[x.length-1])>-1:void 0===x;s||(p+="(?:"+h+"(?="+d+"))?"),R||(p+="(?="+h+"|"+d+")")}return new RegExp(p,y(r))}(v(e,r),t,r)}(e,t,r)}class A{#u;#d;#h;#p;constructor(e,t,r={},n=null){this.#u=e,this.#d=t,this.#h=r,this.#p=n}getPath(){return this.#u}getAction(){return this.#d}getParams(){return this.#h}param(e){return this.#h?.[e]}getName(){return this.#p}toURL(){const e=new URL(window.location.href);return e.pathname=this.getPath(),e}}class I{#m;#f;#w;#b=!1;constructor(e,t,r=null){this.#m=e,this.#f=t,this.#w=r}setIsHistory(e){this.#b=e}isHistory(){return this.#b}route(){return this.#m}query(e){return this.#f?.[e]}queryParams(){return this.#f}param(e){return this.#m.param(e)}hash(){return this.#w}getUrl(){const e=this.route().toURL();if(this.queryParams())for(const[t,r]of Object.entries(this.queryParams()))e.searchParams.set(t,r);return e.toString()}}var C=r(745);class k{#g={};constructor(e){this.#g=e}get(e){return this.#g?.[e]}}class N{#v;constructor(e){this.#v=e}callback(e){this.#v(e)}}class O{#x;constructor(e){this.#x=e}render(e){const t=W().make("app::view-kernel").handle(e);t instanceof N?t.callback(e):this.#x.render(t.getComponent())}renderComponent(e){this.#x.render(e)}}class P{static VERSION="v0.0.1";static#E;#y=!1;#R;#A;#I;constructor(e){this.#R=new a,this.#A=new k(e),this.bindInstance("app::env",this.#A)}static getInstance(){return this.#E}env(e){return this.#A.get(e)}getEnv(){return this.#A}getRootElementId(){return this.#I}register(e=null){if(this.#y)throw new b("[GenesisUI] Operation not allowed: Cannot register service-providers after instance was initialized");if(!e)return;const t=new m;Array.isArray(e)||(e=[e]),t.register(e)}bind(e,t){this.#R.bind(e,t)}bindSingleton(e,t){this.#R.bindSingleton(e,t)}bindInstance(e,t){this.#R.bindInstance(e,t)}make(e,t=[]){return this.#R.resolve(e,this,t)}tryMake(e,t=[]){try{return this.make(e,t)}catch(e){if(e instanceof o)return null;throw e}}init(){return new Promise(function(e,t){if(!this.#y)return this.#y=!0,P.#E=this,void e(new ce(this).bootstrap());t(new b("[GenesisUI] Instance already initialized"))}.bind(this))}catchHandle(e,t=!1){try{return e()}catch(e){if(t){const t=this.tryMake("handler::unhandled");if(t)return void t.handle(e);throw e}const r=this.tryMake("handler::catchall");if(r)return void this.catchHandle((()=>r.handle(e)));if(e instanceof s){const t=this.tryMake("handler::"+e.getName());if(t)return void this.catchHandle((()=>{t.handle(e)}))}throw e}}handle(e){this.catchHandle((()=>{if(!this.#y)throw new b("[GenesisUI] Builder must be initialized before rendering");this.#I=e;const t=this.make("app::router"),r=(0,C.s)(document.getElementById(e)),n=new O(r);this.bindInstance("app::renderer",n),n.render(t.routeUrl(window.location.href)),document.dispatchEvent(new Event("gui.done"))}))}}class U extends t{static mapRoutes(){this._notImplemented("GenesisUI::View::Controllers::AbstractController")}}const S=window.react;var G=r.n(S);class M extends G().Component{render(){return G().createElement("div",null,this.props.children)}}class T{static#C(){return W().make("app::router")}static route(e,t={},r={}){const n=this.#C(),s=n.toRoute(e,t);W().catchHandle((()=>{const e=n.route(s,r);this.#k(e)}),!0)}static url(e){W().catchHandle((()=>{const t=this.#C().routeUrl(e);this.#k(t)}),!0)}static path(e,t){W().catchHandle((()=>{const r=this.#C().route(e,t);this.#k(r)}),!0)}static#k(e){W().make("app::renderer").render(e)}static history(e){const t=e.path,r=e.queryParams;W().catchHandle((()=>{const e=this.#C().route(t,r);e.setIsHistory(!0),this.#k(e)}),!0)}}class _ extends G().Component{render(){return G().createElement(G().StrictMode,null,G().createElement(M,null,"Welcome to an example.",G().createElement("a",{href:"#",onClick:e=>{e.preventDefault(),T.route("example.tests",{prop1:"works"})}},"Click")))}}class L{#N;#O;#P;constructor(e,t=!1,r={}){this.#O=e,this.#N=t,this.#P=r}getRouteNameOrPath(){return this.#O}redirectsToPath(){return this.#N}getParameters(){return this.#P}request(){const e=W().make("app::router");return this.#N?e.route(this.#O,this.#P):e.route(e.toRoute(this.#O,this.#P))}}class j{#U;constructor(e=null){this.#U=e}getComponent(){return this.#U}redirectPath(e,t={}){return new L(e,!0,t)}redirect(e,t={}){return new L(e,!1,t)}abort(e){return new N(e)}}class H{#S(){return decodeURIComponent(document.cookie).split(";")}#G(e){const[t,...r]=e.split("=");return[t,r.join("=")]}all(){let e={};for(const t of this.#S()){let r=this.#G(t);e[r[0].replace(" ","")]=r[1]}return e}get(e){const t=this.all()?.[e]??null;return null!==t?decodeURIComponent(t):null}put(e,t,r=null){r||(r=new Date("now + 1 year"));let n=r.toUTCString(),s=e+"="+encodeURIComponent(t)+"; expires="+n+"; path=/;";$("cookies.secure")&&(s+=" secure"),document.cookie=s}delete(e){let t=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";$("cookies.secure")&&(t+=" secure"),document.cookie=t}exists(e){return null!==this.get(e)}}class q{#M(){return new H}#T(e){return"genesis.opted-in."+e}hasUserGivenConsent(e){const t=this.#T(e);return this.#M().exists(t)}userConsents(e){const t=this.#T(e);this.#M().put(t,1)}userRevokesConsent(e){const t=this.#T(e);this.#M().delete(t)}}class F extends U{static mapRoutes(){return{"/welcome":"welcome","/tests":"tests","/subdomain":"subdomain","/cookieconsent":"cookieConsent"}}welcome(e){return new j(React.createElement(_,null))}tests(e){return new j(React.createElement("div",null,React.createElement("a",{href:"#",onClick:()=>T.route("example.welcome")},"Click")))}subdomain(e){return new j(React.createElement("div",null,"This route only works on the 'test.latus.local' subdomain"))}cookieConsent(e){return(new q).hasUserGivenConsent("example")?(new j).abort((()=>{alert("You have to consent to cookies!")})):new j(React.createElement("div",null,"You have consented to cookies!"))}}class B extends t{constructor(){super("GenesisUI::Routing::Middleware::AbstractMiddleware")}handle(e,t){this._notImplemented("handle")}}class D extends B{handle(e,t){return console.log("Middleware works!"),t(e)}}function z(e){return e.middleware(D).group((e=>(e.add("/",[F,"welcome"]),e.controller(F).name("example"),e))),e}function W(){return P.getInstance()}function $(e){return(new d).get(e)}class K{#_={};#L={};#j=null;register(e){if(null!==this.#j)throw new b("[GenesisUI] Cannot register routes on router: Routes already registered");this.#j=e}registerMiddleware(e,t){return this.#_[e]=t,this}aliasMiddleware(e,t){return this.#L[e]=t,this}middleware(e){return this.#_?.[e]??(this.#L?.[e]?this.#_?.[this.#L[e]]:null)}match(e){for(const t of this.#j){const r=x(t.path,{decode:decodeURIComponent})(e);if(!1!==r&&(!t.domain||t.domain.includes(window.location.hostname)))return{route:new A(e,t.action,r.params,t?.name),middleware:t.middleware}}return null}toRoute(e,t={}){const r=this.#j.filter((t=>t?.name&&t.name===e)),n=r.length>0?r[0]:null;return n?(s=n.path,i={encode:encodeURIComponent},function(e,t){void 0===t&&(t={});var r=y(t),n=t.encode,s=void 0===n?function(e){return e}:n,i=t.validate,o=void 0===i||i,a=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var l=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,u="*"===i.modifier||"+"===i.modifier;if(Array.isArray(l)){if(!u)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===l.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var d=0;d<l.length;d++){var h=s(l[d],i);if(o&&!a[n].test(h))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+h+'"');r+=i.prefix+h+i.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c){var p=u?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+p)}}else{if(h=s(String(l),i),o&&!a[n].test(h))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+h+'"');r+=i.prefix+h+i.suffix}}else r+=i}return r}}(v(s,i),i))(t):null;var s,i}routeUrl(e){const t=new URL(e),r=t.pathname;return this.route(r,Object.fromEntries(t.searchParams))}route(e,t=null){const r=W().make("app::view-kernel");r.flush();const n=this.match(e);if(!n)throw new g("[GenesisUI] Route not found: A route could not be matched by the given path",e);return r.attachRequestMiddleware(n.middleware),new I(n.route,t)}}class V{#H;#q=[];constructor(e=[]){this.#H=e}attachGlobalMiddleware(e){Array.isArray(e)?this.#H.push(...e):this.#H.push(e)}attachRequestMiddleware(e){Array.isArray(e)?this.#q.push(...e):this.#q.push(e)}handle(e){const t=W().make("app::router");let r=[...this.#H];r.push(...this.#q);let n=e.route().getAction();if(Array.isArray(n))try{const e=new n[0];n=e[n[1]]}catch(e){throw new p("[GenesisUI] Middleware must be either an Array.[Controller.static, methodName] or a function")}if(0===r.length)return n(e);const s=this.#F(r,t,n,e);if(s instanceof j)return s;if(s instanceof L)return this.handle(s.request());if(s instanceof N)return s;throw new p("[GenesisUI] Could not render app: No response")}#F(e,t,r,n){const s=n=>i=>{if(i instanceof j||i instanceof L||i instanceof N)return i;const o=e?.[n+1];return o?this.#B(e[n],t).handle(i,s(n+1)):this.#B(e[n],t).handle(i,r)};return s(0)(n)}#B(e,t){let r,n;r="string"==typeof e?t.middleware(e):e;try{if(n=new r,!(n instanceof B))throw new Error}catch(e){throw new p("[GenesisUI] Unable to handle request: Invalid middleware")}return n}flush(){this.#q=[]}}class Y extends B{handle(e,t){const r=e.route().getPath(),n=e.getUrl(),s={path:r,queryParams:e.queryParams()};return history?.state?e.isHistory()||history.pushState(s,"",n):history.replaceState(s,"",n),t(e)}}class J extends t{constructor(){super("GenesisUI::Exceptions::AbstractHandler")}handle(e){this._notImplemented("handle")}}class Q extends J{map={RouteNotFoundException:this.#D,RuntimeException:this.#z,BindingException:this.#z,BindingResolutionException:this.#z,MethodNotImplementedException:this.#z,OperationNotAllowedException:this.#z};handle(e){let t;e instanceof s&&(t=this.map?.[e?.getName()??"unknown"])||this.#W(e),t(e)}#D(e){W().make("app::renderer").renderComponent(React.createElement(React.Fragment,null,React.createElement("h1",null,"404 - Not Found"),React.createElement("p",null,"The resource you are looking for does not exist."))),e?.path&&(window.location.pathname=e.path)}#z(e){W().make("app::renderer").renderComponent(React.createElement(React.Fragment,null,React.createElement("h1",null,"Application Error"),React.createElement("p",null,"A fatal error has prevented the application from running correctly."))),console.error(e)}#W(e){W().make("app::renderer").renderComponent(React.createElement(React.Fragment,null,React.createElement("h1",null,"Unknown Error"),React.createElement("p",null,"A unknown error has prevented the application from running correctly."))),console.error(e)}}class X extends h{boot(){this._app.bindSingleton("app::router",(()=>new K)),this._app.bindInstance("app::view-kernel",new V([Y])),this.#$()}#$(){const e=()=>new Q;this._app.bind("handler::RouteNotFoundException",e),this._app.bind("handler::RuntimeException",e),this._app.bind("handler::BindingException",e),this._app.bind("handler::BindingResolutionException",e),this._app.bind("handler::MethodNotImplementedException",e),this._app.bind("handler::OperationNotAllowedException",e)}register(){}}class Z{#m=null;#_=[];#d=null;#K;#p;#V;constructor(e,t=null,r=null){this.#K=e,this.#m=r,this.#d=t,this.#p=null,this.#V=null}route(e){return this.#m=e,this}action(e){return this.#d=e,this}middleware(e){return Array.isArray(e)?(this.#_.push(...e),this):(this.#_.push(e),this)}name(e){return this.#p=e,this}domain(e){return Array.isArray(e)?(this.#V=e,this):(this.#V=[e],this)}build(){return{path:this.#m,action:this.#d,middleware:this.#_,name:this.#p,domain:this.#V}}}class ee{#_;#Y;#v;#V;constructor({middleware:e=[],prefix:t=null,callback:r=null}){this.#_=Array.isArray(e)?e:[e],this.#Y=t,this.#v=r,this.#V=null}middleware(e){return Array.isArray(e)||(e=[e]),this.#_.push(...e),this}prefix(e){return this.#Y=e,this}group(e){this.#v=e}domain(e){return Array.isArray(e)?(this.#V=e,this):(this.#V=[e],this)}build(){let e=[];if(!this.#v)return e;const t=this.#Y??"",r=this.#_;let n=new re;if(n=this.#v(n),!n instanceof re)throw new p('[GenesisUI] Routes callbacks must return an instance of "Routes"');for(const s of n.build())r.push(...s.middleware),e.push({path:t+s.path,middleware:r,action:s.action,name:s?.name??null,domain:this.#V??s?.domain});return e}}class te{#_;#Y;#J;#Q;#X=null;#p;#V;constructor({controller:e,middleware:t=[],prefix:r=null,only:n=null}){this.#_=t,this.#Y=r,this.#Q=n,this.#J=e,this.#p=null,this.#V=null}middleware(e){return Array.isArray(e)||(e=[e]),this.#_.push(...e),this}prefix(e){return this.#Y=e,this}only(e){return this.#Q=e,this}mapRoutes(e){return this.#X=e,this}name(e){return this.#p=e,this}domain(e){return Array.isArray(e)?(this.#V=e,this):(this.#V=[e],this)}build(){let e=[];const t=this.#Y??"",r=this.#_,n=this.#Q,s=this.#X??this.#J.mapRoutes();for(const[i,o]of Object.entries(s))n&&!n.includes(o)||e.push({path:t+i,middleware:r,action:[this.#J,o],name:this.#p?this.#p+"."+o:null,domain:this.#V});return e}}class re{#Z=0;#ee={};#te(){return this.#Z++,this.#Z}prefix(e){const t=this.#te();return this.#ee[t]=new ee({prefix:e}),this.#ee[t]}domain(e){const t=this.#te(),r=new ee({});return r.domain(e),this.#ee[t]=r,this.#ee[t]}action(e,t){const r=this.#te();return this.#ee[r]=new Z(r,t,e),this.#ee[r]}add(e=null,t=null){const r=this.#te();return this.#ee[r]=new Z(r,t,e),this.#ee[r]}middleware(e){const t=this.#te();return this.#ee[t]=new ee({middleware:e}),this.#ee[t]}controller(e){const t=this.#te();return this.#ee[t]=new te({controller:e}),this.#ee[t]}#re(){return this.#ee}build(){let e=[];for(const[t,r]of Object.entries(this.#ee)){const t=r.build();Array.isArray(t)?e.push(...t):e.push(t)}return e}}class ne extends t{constructor(){super("GenesisUI::Listeners::AbstractListener")}handle(e){this._notImplemented("handle")}}class se extends ne{handle(e){if(e.isTrusted){e.preventDefault();const t=e?.state??{path:"/",queryParams:{}};T.history(t)}}}class ie extends h{boot(){}register(){this.addListener("popstate",se)}}const oe=e=>({name:e.get("name")??"Genesis Website",domain:e.get("domain")??"localhost"}),ae=e=>({requireOptIn:e.get("COOKIES_OPTIN")??!0,secure:e.get("SECURE_COOKIES")??!0,sameSite:e.get("SAMESITE_COOKIES")??!0});class le extends h{boot(){}register(){this.loadConfig("app",oe),this.loadConfig("cookies",ae)}}class ce{#ne;#se=[];constructor(e){this.#ne=e}#ie=[w,X,ie,le];#oe(e){let t=0;for(let r of e){const e=new r(this.#ne);e.boot(),this.#se.push(e),t++}return t}#ae(){for(const e of this.#se)e.register()}#le(){const e=(new c).getCallbacks();let t=[];for(const r of e){let e=new re;if(e=r(e),!e instanceof re)throw new p('[GenesisUI] Routes callbacks must return an instance of "Routes"');t.push(...e.build())}this.#ne.make("app::router").register(t)}bootstrap(){let e=this.#oe(this.#ie)+this.#oe((new m).get());return this.#ae(),this.#le(),this.#se=[],e}}class ue{}n.create(ue,{LANGUAGE:"language",DATE:"date",NUMBER:"number"});class de{static LocaleType(){return ue}static#ce=null;static#ue=null;static#de=null;setLocale(e,t){switch(e){case ue.DATE:de.#ue=t;break;case ue.LANGUAGE:de.#ce=t;break;case ue.NUMBER:de.#de=t}}getLocale(e,t=null){switch(e){case ue.DATE:return de.#ue??t;case ue.LANGUAGE:return de.#ce??t;case ue.NUMBER:return de.#de??t}}}exports.Abstract={AbstractClass:t,AbstractTrait:class extends t{_staticObject;constructor(e){super("GenesisUI::Abstract::AbstractTrait"),this._staticObject=e,this.define()}define(){this._notImplemented("define")}},Enum:n,Traits:class{static use(e,t){for(const r of t)new r(e)}}},exports.Application={Container:{Container:a,Resolvable:class{#he;#pe;constructor(e,t=[]){this.#he=e,this.#pe=t}make(e,t={}){let r;const n=Object.entries(t).filter((([e,t])=>this.#pe.includes(e)));try{r=e.make(this.#he,n)}catch(e){if(!e instanceof o||"string"==typeof this.#he)throw e;try{r=new r}catch(e){throw new o('[GenesisUI] Could not resolve a bindable or instance from "'+r+'"')}}return r}}},Bootstrapper:ce,Genesis:P},exports.Exceptions={AbstractException:s,AbstractHandler:J,BindingException:i,BindingResolutionException:o,ExceptionHandler:Q,MethodNotImplementedException:e,OperationNotAllowedException:b,RouteNotFoundException:g,RuntimeException:p,UnhandledException:class extends s{originalException;constructor(e,t){super(e),this.originalException=t}getName(){return"UnhandledException"}}},exports.Listeners={AbstractListener:ne,HandleHistory:se},exports.Models={Classname:class{#me;constructor(e){this.#me=e}combine(){let e="";for(let t of this.#me)t&&("string"==typeof t&&(t=t.split(" ")),e+=t.join(" ")+" ");return e}},Env:k},exports.Providers={AbstractServiceProvider:h,ConfigServiceProvider:le,EventServiceProvider:ie,ExampleServiceProvider:class extends h{boot(){}register(){this.loadRoutes(z)}},RouteServiceProvider:X,TranslationServiceProvider:w},exports.Routing={Factory:{RouteController:te,RouteFactory:Z,RouteGroup:ee,Routes:re},Middleware:{AbstractMiddleware:B,ExampleMiddleware:D,UpdateHistory:Y},Goto:T,Request:I,Route:A,Router:K},exports.Services={ConfigService:d,CookieConsentService:q,CookieService:H,LocalizationService:de,RouteService:c,ServiceProviderService:m,TranslationService:l},exports.View={Controllers:{AbstractController:U,ExampleController:F},Responses:{AbortResponse:N,RedirectResponse:L,Response:j},UI:{Example:{Pages:{Welcome:_},Layout:M}},Kernel:V,Renderer:O},exports.Utility=u,exports.gns=W,exports.config=$,exports.configObj=function(e,t=null){return(new d).getObj(e,t)},exports.env=function(e,t=null){return W().env(e)??t}})()})();