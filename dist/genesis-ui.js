!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ReactDOM"),require("React")):"function"==typeof define&&define.amd?define(["ReactDOM","React"],t):"object"==typeof exports?exports.Genesis=t(require("ReactDOM"),require("React")):e.Genesis=t(e.ReactDOM,e.React)}(self,((e,t)=>(()=>{"use strict";var r={745:(e,t,r)=>{var n=r(314);t.s=n.createRoot,n.hydrateRoot},24:e=>{e.exports=t},314:t=>{t.exports=e}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,s),i.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{s.r(i),s.d(i,{Abstract:()=>V,App:()=>_,Compliance:()=>J,ExampleServiceProvider:()=>$,Exception:()=>K,Model:()=>W,Resolvable:()=>T,Router:()=>E,get:()=>Q});class e extends Error{message;bindableName;name="BindingException";constructor(e,t){super(e),this.bindableName=t}}class t extends Error{message;bindableName;name="BindingResolutionException";constructor(e,t){super(e),this.bindableName=t}}class r{static#e={};static#t={};static#r={};clear(e){return r.#r[e]&&delete r.#r[e],r.#t[e]&&delete r.#t[e],r.#e[e]&&delete r.#e[e],this}resolve(e,n,s=[]){if(r.#r[e])return r.#r[e](n,...s);if(r.#t[e]){const t=r.#t[e](n,...s);return this.clear(e),this.bindInstance(e,t),this.resolve(e,n)}if(r.#e[e])return r.#e[e];throw new t('[GenesisUI] Could not resolve a bindable or instance from "'+e+'"')}bind(t,n){if("function"!=typeof n)throw new e('[GenesisUI] Could not bind: Bindable must be wrapped by a "function"',t);return this.clear(t),r.#r[t]=n,this}bindSingleton(t,n){if("function"!=typeof n)throw new e('[GenesisUI] Could not bind singleton: Bindable must be wrapped by a "function"',t);return this.clear(t),r.#t[t]=n,this}bindInstance(e,t){return this.clear(e),r.#e[e]=t,this}}class n extends Error{name="RuntimeException";constructor(e){super(e)}}class o extends Error{baseClassName;extendingClassName;methodName;name="MethodNotImplementedException";constructor(e,t,r,n){super(e),this.baseClassName=t,this.extendingClassName=r,this.methodName=n}}class a{#n;constructor(e){this.#n=e}_notImplemented(e,t=null){throw t=t??this.#n,new o('Class "'+this.constructor.name+'" must implement abstract method "'+e+'" of class "'+t+'"',t,this.constructor.name,e)}static _notImplemented(e,t){(new this)._notImplemented(e,t)}}class l{static#s={};add(e,t,r,n){return this.#i(e,t),l.#s[e][t][r]=n,this}#i(e,t){l.#s?.[e]||(l.#s[e]={}),l.#s[e]?.[t]||(l.#s[e][t]={})}trans(e,t,r){return l.#s?.[e]?.[t]?.[r]??t+"::"+r}search(e,t){const r=e.split("::");if(2!==r.length)return null;const n=r[0],s=r[1],i=l.#s?.[t]?.[n];if(!i)return null;let o={};for(const[e,t]of Object.entries(i))-1!==e.indexOf(s)&&(o[e]=t);return o.length>0?o:null}}class c{static#o=[];registerCallback(e){c.#o.push(e)}getCallbacks(){return c.#o}}class d extends a{_app;constructor(e){super("GenesisUI::Providers::AbstractServiceProvider"),this._app=e}boot(){this._notImplemented("boot")}register(){this._notImplemented("register")}addListener(e,t,r=!1){return document.addEventListener("gui.done",(r=>{document.addEventListener(e,(e=>{(new t).handle(e)}))})),this}addTranslations(e,t){const r=new l;for(const[n,s]of Object.entries(e))for(const[e,i]of Object.entries(s))r.add(t,n,e,i);return this}loadRoutes(e){return(new c).registerCallback(e),this}attachGlobalMiddleware(e){return this._app.make("app::view-kernel").attachGlobalMiddleware(e),this}}class u{static#a=[];register(e){Array.isArray(e)||(e=[e]);for(const t of e){let e;try{if(e=new t,!(e instanceof d))throw new Error}catch(e){throw new n('[GenesisUI] Service-Provider must be an instance of "AbstractServiceProvider"')}u.#a.push(t)}}get(){return u.#a}}class h extends Error{name="OperationNotAllowedException";constructor(e){super(e)}}const p={en:{genesis:{}}};class f extends d{boot(){}register(){for(const[e,t]of Object.entries(p))this.addTranslations(t,e)}}class m extends Error{name="RouteNotFoundException";path;constructor(e,t){super(e),this.path=t}}function w(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,s=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],o=n.index,a=Object.create(null),l=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?a[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return s(e,r)})):a[r.name]=s(n[e],r)},c=1;c<n.length;c++)l(c);return{path:i,index:o,params:a}}}(x(e,r,t),r,t)}function b(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function v(e){return e&&e.sensitive?"":"i"}function g(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,s=void 0!==n&&n,i=r.start,o=void 0===i||i,a=r.end,l=void 0===a||a,c=r.encode,d=void 0===c?function(e){return e}:c,u="["+b(r.endsWith||"")+"]|$",h="["+b(r.delimiter||"/#?")+"]",p=o?"^":"",f=0,m=e;f<m.length;f++){var w=m[f];if("string"==typeof w)p+=b(d(w));else{var g=b(d(w.prefix)),x=b(d(w.suffix));if(w.pattern)if(t&&t.push(w),g||x)if("+"===w.modifier||"*"===w.modifier){var I="*"===w.modifier?"?":"";p+="(?:"+g+"((?:"+w.pattern+")(?:"+x+g+"(?:"+w.pattern+"))*)"+x+")"+I}else p+="(?:"+g+"("+w.pattern+")"+x+")"+w.modifier;else p+="("+w.pattern+")"+w.modifier;else p+="(?:"+g+x+")"+w.modifier}}if(l)s||(p+=h+"?"),p+=r.endsWith?"(?="+u+")":"$";else{var y=e[e.length-1],E="string"==typeof y?h.indexOf(y[y.length-1])>-1:void 0===y;s||(p+="(?:"+h+"(?="+u+"))?"),E||(p+="(?="+h+"|"+u+")")}return new RegExp(p,v(r))}(function(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var s=1,i="";if("?"===e[a=r+1])throw new TypeError('Pattern cannot start with "?" at '+a);for(;a<e.length;)if("\\"!==e[a]){if(")"===e[a]){if(0==--s){a++;break}}else if("("===e[a]&&(s++,"?"!==e[a+1]))throw new TypeError("Capturing groups are not allowed at "+a);i+=e[a++]}else i+=e[a++]+e[a++];if(s)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=a}else{for(var o="",a=r+1;a<e.length;){var l=e.charCodeAt(a);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[a++]}if(!o)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:o}),r=a}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,s=void 0===n?"./":n,i="[^"+b(t.delimiter||"/#?")+"]+?",o=[],a=0,l=0,c="",d=function(e){if(l<r.length&&r[l].type===e)return r[l++].value},u=function(e){var t=d(e);if(void 0!==t)return t;var n=r[l],s=n.type,i=n.index;throw new TypeError("Unexpected "+s+" at "+i+", expected "+e)},h=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};l<r.length;){var p=d("CHAR"),f=d("NAME"),m=d("PATTERN");if(f||m){var w=p||"";-1===s.indexOf(w)&&(c+=w,w=""),c&&(o.push(c),c=""),o.push({name:f||a++,prefix:w,suffix:"",pattern:m||i,modifier:d("MODIFIER")||""})}else{var v=p||d("ESCAPED_CHAR");if(v)c+=v;else if(c&&(o.push(c),c=""),d("OPEN")){w=h();var g=d("NAME")||"",x=d("PATTERN")||"",I=h();u("CLOSE"),o.push({name:g||(x?a++:""),pattern:g&&!x?i:x,prefix:w,suffix:I,modifier:d("MODIFIER")||""})}else u("END")}}return o}(e,r),t,r)}function x(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,s=r.exec(e.source);s;)t.push({name:s[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),s=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return x(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",v(r))}(e,t,r):g(e,t,r)}class I{#l;#c;#d;#u;constructor(e,t,r={},n=null){this.#l=e,this.#c=t,this.#d=r,this.#u=n}getPath(){return this.#l}getAction(){return this.#c}getParams(){return this.#d}param(e){return this.#d?.[e]}getName(){return this.#u}}class y{#h;#p;constructor(e,t){this.#h=e,this.#p=t}route(){return this.#h}query(e){return this.#p?.[e]}param(e){return this.#h.param(e)}}class E{#f={};#m={};#w=null;register(e){if(null!==this.#w)throw new h("[GenesisUI] Cannot register routes on router: Routes already registered");this.#w=e}registerMiddleware(e,t){return this.#f[e]=t,this}aliasMiddleware(e,t){return this.#m[e]=t,this}middleware(e){return this.#f?.[e]??(this.#m?.[e]?this.#f?.[this.#m[e]]:null)}match(e){for(const t of this.#w){const r=w(t.path,{decode:decodeURIComponent})(e);if(!1!==r)return{route:new I(e,t.action,r.params,t?.name),middleware:t.middleware}}return null}routeUrl(e){const t=new URL(e),r=t.pathname;return this.route(r,Object.fromEntries(t.searchParams))}route(e,t=null){const r=_.getInstance().make("app::view-kernel");r.flush();const n=this.match(e);if(!n)throw new m("[GenesisUI] Route not found: A route could not be matched by the given path",e);return r.attachRequestMiddleware(n.middleware),new y(n.route,t)}}class A extends a{constructor(){super("GenesisUI::Routing::Middleware::AbstractMiddleware")}handle(e,t){this._notImplemented("handle")}}class R{#b;constructor(e){this.#b=e}getComponent(){return this.#b}}class C{#v;#g=[];constructor(e=[]){this.#v=e}attachGlobalMiddleware(e){Array.isArray(e)?this.#v.push(...e):this.#v.push(e)}attachRequestMiddleware(e){Array.isArray(e)?this.#g.push(...e):this.#g.push(e)}handle(e){const t=_.getInstance().make("app::router"),r=this.#v.concat(this.#g);let s=0;const i=r.length;let o=e.route().getAction();if(Array.isArray(o))try{const e=new o[0];o=e[o[1]]}catch(e){throw new n("[GenesisUI] Middleware must be either an Array.[Controller.static, methodName] or a function")}if(0===r.length)return o(e);for(const a of r){if(!(e instanceof y))throw new n('[GenesisUI] Middleware may only return instances of "Request"');const l=this.#x(a,t);let c;if(c=s<i?r[s+1].handle:o,(e=this.#I(l,c,e))instanceof R)return e;s++}throw new n("[GenesisUI] Could not render app: No response")}#I(e,t,r){return e.handle(r,t)}#x(e,t){let r,s;r="string"==typeof e?t.middleware(e):e;try{if(s=new r,!(s instanceof A))throw new Error}catch(e){throw new n("[GenesisUI] Unable to handle request: Invalid middleware")}return s}flush(){this.#g=[]}}class O extends d{boot(){this._app.bindSingleton("app::router",(()=>new E)),this._app.bindInstance("app::view-kernel",new C)}register(){}}class M{#h=null;#f=[];#c=null;#y;constructor(e,t=null,r=null){this.#y=e,this.#h=r,this.#c=t}route(e){return this.#h=e,this}action(e){return this.#c=e,this}middleware(e){return Array.isArray(e)?(this.#f.push(...e),this):(this.#f.push(e),this)}build(){return{path:this.#h,action:this.#c,middleware:this.#f}}}class G{#f;#E;#A;constructor({middleware:e=[],prefix:t=null,callback:r=null}){this.#f=e,this.#E=t,this.#A=r}middleware(e){Array.isArray(e)||(e=[e]),this.#f=this.#f.concat(e)}prefix(e){return this.#E=e,this}group(e){this.#A=e}build(){let e=[];if(!this.#A)return e;const t=this.#E??"",r=this.#f;let s=new k;if(s=this.#A(s),!s instanceof k)throw new n('[GenesisUI] Routes callbacks must return an instance of "Routes"');for(const n of s.build())e.push({path:t+n.path,middleware:r.concat(n.middleware),action:n.action});return e}}class N{#f;#E;#R;#C;#O=null;constructor({controller:e,middleware:t=[],prefix:r=null,only:n=null}){this.#f=t,this.#E=r,this.#C=n,this.#R=e}middleware(e){Array.isArray(e)||(e=[e]),this.#f=this.#f.concat(e)}prefix(e){return this.#E=e,this}only(e){return this.#C=e,this}mapRoutes(e){return this.#O=e,this}build(){let e=[];const t=this.#E??"",r=this.#f,n=this.#C,s=this.#O??this.#R.mapRoutes();for(const[i,o]of Object.entries(s))n&&!n.includes(o)||e.push({path:t+i,middleware:r,action:[this.#R,o]});return e}}class k{#M=0;#G={};#N(){return this.#M++,this.#M}prefix(e){const t=this.#N();return this.#G[t]=new G({prefix:e}),this.#G[t]}action(e,t){const r=this.#N();return this.#G[r]=new M(r,t,e),this.#G[r]}add(e=null,t=null){const r=this.#N();return this.#G[r]=new M(r,t,e),this.#G[r]}middleware(e){const t=this.#N();return this.#G[t]=new G({middleware:e}),this.#G[t]}controller(e){const t=this.#N();return this.#G[t]=new N({controller:e}),this.#G[t]}#k(){return this.#G}build(){let e=[];for(const[t,r]of Object.entries(this.#G)){const t=r.build();Array.isArray(t)?e.push(...t):e.push(t)}return e}}class P{#P;#S=[];constructor(e){this.#P=e}#U=[f,O];#_(e){let t=0;for(let r of e){const e=new r(this.#P);e.boot(),this.#S.push(e),t++}return t}#j(){for(const e of this.#S)e.register()}#T(){const e=(new c).getCallbacks();let t=[];for(const r of e){let e=new k;if(e=r(e),!e instanceof k)throw new n('[GenesisUI] Routes callbacks must return an instance of "Routes"');t.push(...e.build())}this.#P.make("app::router").register(t)}bootstrap(){let e=this.#_(this.#U)+this.#_((new u).get());return this.#j(),this.#T(),this.#S=[],e}}var S=s(745);class U{#q={};constructor(e){this.#q=e}get(e){return this.#q?.[e]}}class _{static VERSION="v0.0.1";static REACT_VERSION=18;static#D;#B=!1;#F;#L;#z;constructor(e){this.#F=new r,this.#L=new U(e),this.bindInstance("app::env",this.#L)}static getInstance(){return this.#D}env(e){return this.#L.get(e)}getRootElementId(){return this.#z}register(e=null){if(this.#B)throw new h("[GenesisUI] Operation not allowed: Cannot register service-providers after instance was initialized");if(!e)return;const t=new u;Array.isArray(e)||(e=[e]),t.register(e)}bind(e,t){this.#F.bind(e,t)}bindSingleton(e,t){this.#F.bindSingleton(e,t)}bindInstance(e,t){this.#F.bindInstance(e,t)}make(e,t=[]){return this.#F.resolve(e,this,t)}init(){return new Promise(function(e,t){if(!this.#B)return this.#B=!0,void e(new P(this).bootstrap());t(new h("[GenesisUI] Instance already initialized"))}.bind(this))}handle(e){if(!this.#B)throw new h("[GenesisUI] Builder must be initialized before rendering");this.#z=e,_.#D=this;const t=(0,S.s)(document.getElementById(e)),r=this.make("app::router").routeUrl(window.location.href);t.render(this.make("app::view-kernel").handle(r).getComponent()),document.dispatchEvent(new Event("gui.done"))}}const j=function(){const e=window?.React?.version,t=null!==e;if(!t)return{is_present:t};const r=e.split("-"),n=r[1]+"-"+r[2],s=r[0].split("."),i=s[0],o=s[1]+"."+s[2];return{is_present:t,major:Number(i),minor:o,versions:s,hash:n,raw:e}}();class T{#H;#$;constructor(e,t=[]){this.#H=e,this.#$=t}make(e,r={}){let n;const s=Object.entries(r).filter((([e,t])=>this.#$.includes(e)));try{n=e.make(this.#H,s)}catch(e){if(!e instanceof t||"string"==typeof this.#H)throw e;try{n=new n}catch(e){throw new t('[GenesisUI] Could not resolve a bindable or instance from "'+n+'"')}}return n}}class q extends a{static mapRoutes(){this._notImplemented("GenesisUI::View::Controllers::AbstractController")}}var D=s(24),B=s.n(D);class F extends B().Component{render(){return B().createElement("div",null,this.props.children)}}class L extends B().Component{render(){return B().createElement(B().StrictMode,null,B().createElement(F,null,"Welcome to an example."))}}class z extends q{static mapRoutes(){return{welcome:"welcome"}}welcome(e){return new R(React.createElement(L,null))}}function H(e){return e.add("/",[z,"welcome"]),e}class $ extends d{boot(){}register(){this.loadRoutes(H)}}const V={Class:a,Trait:class extends a{_staticObject;constructor(e){super("GenesisUI::Abstract::AbstractTrait"),this._staticObject=e,this.define()}define(){this._notImplemented("define")}},Traits:class{static use(e,t){for(const r of t)new r(e)}},Enum:class{static create(e,t){for(const[r,n]of Object.entries(t))Object.defineProperty(e,r.toString(),{value:n,writable:!1,enumerable:!0,configurable:!1})}static from(){}},ServiceProvider:d,Listener:class extends a{constructor(){super("GenesisUI::Listeners::AbstractListener")}handle(e){this._notImplemented("handle")}},Controller:q,Middleware:A},W={Classname:class{#V;constructor(e){this.#V=e}combine(){let e="";for(let t of this.#V)t&&("string"==typeof t&&(t=t.split(" ")),e+=t.join(" ")+" ");return e}}},J={React:j},K={BindingException:e,BindingResolutionException:t,MethodNotImplementedException:o,OperationNotAllowedException:h,RuntimeException:n};function Q(){return _.getInstance()}})(),i})()));